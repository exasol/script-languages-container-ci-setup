{% include "heading.tmpl" %}
{% raw %}
name: SLC-CD-Flavor

on:
  workflow_call:
    inputs:
      flavor:
          description: 'A flavor'
          required: true
          type: string
    secrets:
      CI4_DOCKERHUB_USERNAME:
          required: true
      CI4_DOCKERHUB_TOKEN:
          required: true

jobs:

  build:
    uses: ./.github/workflows/slc_ci_build_slc.yml
    with:
      flavor: ${{ inputs.flavor }}
      build-mode: 'release'
    secrets: inherit

  test:
    needs: [build]
    uses: ./.github/workflows/slc_ci_test_slc.yml
    with:
      flavor: ${{ inputs.flavor }}
    secrets: inherit{% endraw %}
